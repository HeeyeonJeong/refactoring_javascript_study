# Chapter11 - API 리팩터링
좋은 모듈의 내부 구현사항은 캡슐화 되어 있어야한다.
= 외부에서 사용할 필요가 있는 동작만 API로 제공되어야한다.

사용하기 좋은 API 조건
- 하나의 일만 하도록, 그 목적이 잘 드러나는 이름으로 짓기
- 단순 조회와 수정하는 동작을 명확하게 분리하기
- 복잡한 매개변수 지양

## 11-1 질의 함수와 변경 함수 분리하기

함수 만들때 고려해야할 사항
- 사이드 이펙트 없이 만들어야한다.
- 질의 함수와 업데이트 함수 로직을 분리하므로 재사용성도 높아지고, 유지복수성도 높아진다
- 함수를 잘게 쪼갠다면 함수를 특정 복잡한 로직을 생성할때 조각조각 기능별 함수를 조합해서 사용이 가능해지므로 가독성 또한 뛰어나진다.


## 11-2 함수 매개변수화하기
비슷한 코드가 존재한다면 동일한 동작을 하는 것은 함수로 묶고, 매개변수로 달라지는 부분(특징)을 전달하자.

## 11-3 플래그 인수 제거하기
flag 인수는 가능한한 사용하지 않는 것이 좋다.(가독성과 사용성이 너무 떨어짐)

function (**isOOO**)으로 분리하는 것보다 명령적으로 처리하는 것이 더 좋다.

외부에서는 개별적 호출이 가능하도록, 내부적으로는 중복코드가 많다면 private하게 내부에서만 사용하자.

## 11-4 객체 통째로 넘기기

## 11-5 매개변수를 질의 함수로 바꾸기
같은 모듈(클래스)안에서 매개변수를 통해서 값을 구하는 것보다 질의함수를 이용해서 사용하는 것이 좀 더 효율적이고, 코드를 이해하는데 있어 유리하다.
응집도가 높은 내부 모듈, 클래스에서는 내부적으로 매개변수를 전달받아 처리하기보다는 데이터에 직접 접근할 수 있는 질의 함수 만들어서 사용하자


## 11-6 질의 함수를 매개변수로 바꾸기
외부의 모듈, 전역변수 속성에 있는 것을 함수 내부에서 직접 접근하는 것은 정말 좋지 않다. 이럴경우는 매개변수로 전달받자.
필요한 데이터를 매개변수를 통해 외부로부터 전달받아 사용하는 것이 안전하다.

## 11-7 세터 제거하기
특정한 객체, 클래스 모델링시 아무렇게나 모델링하는 것이 아니라 읽기가 가능한지, 쓰기가 가능한지 캡슐화를 잘하자.

## 11-8 생성자를 팩터리 함수로 바꾸기
팩터리함수란?<br />
복잡한 생성자 함수를 캡슐화할 부분을 제외한 나머지만 작성하게하여 간단하게 생성할 수 있도록 도와줌

왜 사용하는가?
- 인스턴스를 만드는 로직 자체를 캡슐화하고
- 외부에서 손쉽고 간결하게 생성할 수 있도록 하기 위해 사용

## 11-9 함수를 명령으로 바꾸기
어떤 특정한 계산이나 명령이 프로그램 곳곳에서 사용된다면 커맨드 클래스(명령형)를 활용하자

## 11-10 명령을 함수로 바꾸기
커맨트 클래스와 달리 일시적인 경우에는 클래스로 만들어두는 것은 불필요한 비용이 드는 것이다.
프로젝트 내부에서 데이터를 영원히 간직할 필요가 없다면 클래스보다는 일반함수로 만드는 것이 좋다. 인스턴스를 유지하는 메모리 비용이 더 많이 든다(?)

## 11-11 수정된 갑 반환하기

## 11-12 오류 코드를 예외로 바꾸기

## 11-13 예외를 사전확인으로 바꾸기
예외를 남용하지말자

예상이 되는 에러는 상황에 맞게 처리하면 된다.
네트워크 연결이 안되어 있는 등의 특이 케이스의 경우와 같은 예기치 못한 상황에서 사용하자