## Ch.8 기능 이동

- 기능 이동은 서로 연관있는 곳으로 옮기는 작업이기 때문에, **응집도**를 높이는 방법과도 일맥상통한다.

### 응집도

- 서로 밀접하게 연관있는 속성(data)과 행동(method)이 함께 뭉쳐있는 정도 \_ 모듈, 클래스, 함수
- 의존성이 낮고, 응집도가 높을수록 좋은 코드 - 이해하기 쉽고, 재사용성이 높고, 유지보수하기가 쉬워진다!
- 무엇보다, 다른 클래스나 모듈의 변화에 크게 영향을 받지 않게 된다!

![image](https://media.discordapp.net/attachments/885202056355397686/1019598100509249567/unknown.png)

### 필드

- 클래스 안에서의 데이터를 의미한다.

<br />

### 8.1 함수 옮기기

- 더 관련있는 곳으로 함수를 옮기면, 캡슐화가 더 좋아져 의존성은 낮아지고 응집도는 높아진다.
- 중첩 함수의 사용은 되도록 만들지 말자! \_ 숨겨진 데이터끼리 상호 의존하기가 아주 쉬워지기 때문이다.

<br />

### 8.2 필드 옮기기

- 필드: 클래스 안에서의 데이터를 의미한다.
- 함수에 건네지는 데이터들은 상호관계가 명확하게 드러나도록 한 레코드에 담는 것이 가장 좋다.

<br />

### 8.3 문장을 함수로 옮기기

- 중복되는 코드를 함수로 옮기기.

<br />

### 8.4 문장을 호출한 곳으로 옮기기

- 8.3 문장을 함수로 옮기기와 반대 개념
- 해당 문장을 사용하는 곳마다 조금씩 달라지는 것이 있다면, 해당 부분을 함수에서 바깥으로 인라인 시킨다.

<br />

### 8.5 인라인 코드를 함수 호출로 바꾸기

- 함수의 이름은 코드의 동작 방식이 아니라, **목적**을 드러나도록 짜야한다!
- 6.1 함수 추출하기와 이번 8.5의 차이는, 인라인 코드를 대체할 수 있는 함수가 이미 존재하느냐의 여부이다.
- 새로 함수를 만들어야 한다면, 6.1 함수 추출하기를 적용하고,
- 함수가 이미 존재한다면, 8.5 인라인 코드를 함수 호출로 바꾸기를 적용한다.
- 라이브러리나 프레임워크의 API를 잘 알고 있을수록 이번 리팩토링 방식이 많은 도움이 될 것이다.

<br />

### 8.6 문장 슬라이드하기

- 변수 선언은 해당 변수를 처음 사용할 때 하자.
- 관련 코드들 끼리는 서로 모여있는 것이 좋다.

<br />

### 8.7 반복문 쪼개기

- 종종 반복문 하나에 관계없는 두가지 이상의 일을 수행하는 것이 보일 때가 있다.
- 각 반복문을 분리해두면, 후에 수정이 생길 경우 각각 독립적으로 수정이 가능하기 때문에 더 편하다.
- 한번의 반복문으로 끝낼 것을 두 번 실행한다고 큰 병목현상이 생기지 않는다. \_ 오히려 반복문 쪼개기가 더 강력한 최적화를 적용할 수 있게 만들어준다.
- 반복문 쪼개기는 그 자체로 끝이 아니라, **나뉜 각 반복문을 함수로 추출**하는 것까지 고려하자!

<br />

### 8.8 반복문을 파이프라인으로 바꾸기

- for 혹은 while 루프문을 map, filter, reduce, forEach 등을 이용해 파이프라인으로 바꾸기.

<br />

### 8.9 죽은 코드 제거하기

- 쓰이지 않는 코드가 있다면 즉시 지우자!
- 쓰이지 않는 코드가 몇줄 있다고 성능이 느려지고 메모리가 부족해지는 것은 아니지만, 소프트웨어의 동작을 이해하는데 걸림돌이 될 수 있기 때문이다.
